(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5877:function(e,t,a){Promise.resolve().then(a.bind(a,441))},441:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ep}});var s=a(7437),r=a(2265),l=a(9376),n=a(8712),o=a(5035),i=a(8804),c=a(6290),d=a(8120),h=a(7501),x=a(7032),m=a(3649),g=a(9365),u=a(5455),p=a(9008),w=a(7847),j=a(9409),b=a(3067),f=a(6632),v=a(7718),y=a(4555),N=a(2299),C=a(7752),S=a(134),k=a(4294),P=a(8793),D=a(4087),L=a(3168),Z=a(4362),I=a(713),E=a(1239),R=a(2926),O=a(5395),T=a(4401),A=a(5929),z=a(7226),_=a(875),F=a(2369),M=a(8728),J=a(7692),W=a(1094),q=a(3276),U=a(1769),V=a(2718),B=a(3247),Q=a(2208),G=a(7404),X=a(3388),K=a(8166),H=a(7342),Y=a(1649),$=a(4428),ee=a(9547),et=a(9277),ea=a(91),es=a(7168),er=a(2735),el=a(6362),en=a(221),eo=a(9227),ei=a(8930),ec=a(4440),ed=a(7416),eh=a(8867),ex=a(5922),em=a(1837);let eg=e=>{try{let t=new Date(e);if(isNaN(t.getTime())){let a=e.replace(" ","T");t=new Date(a)}if(isNaN(t.getTime())){let t=e.match(/\d{2}:\d{2}:\d{2}/);return t?t[0]:e}return t.toLocaleTimeString()}catch(t){return e}},eu={INFO:"text-cyan-400",WARNING:"text-yellow-400",ERROR:"text-red-400",DEBUG:"text-gray-400"};function ep(){var e,t;let{user:a,token:ep,logout:ew}=(0,Z.a)(),{t:ej,locale:eb,setLocale:ef}=(0,I.Q)(),{theme:ev,setTheme:ey}=(0,ex.F)(),eN=(0,l.useRouter)(),[eC,eS]=(0,r.useState)("xhs"),[ek,eP]=(0,r.useState)("search"),[eD,eL]=(0,r.useState)("qrcode"),[eZ,eI]=(0,r.useState)("json"),[eE,eR]=(0,r.useState)(""),[eO,eT]=(0,r.useState)(""),[eA,ez]=(0,r.useState)(!1),[e_,eF]=(0,r.useState)(!1),[eM,eJ]=(0,r.useState)(!1),[eW,eq]=(0,r.useState)(null),[eU,eV]=(0,r.useState)([]),[eB,eQ]=(0,r.useState)(!1),[eG,eX]=(0,r.useState)(!1),[eK,eH]=(0,r.useState)(!1),eY=(0,r.useRef)(null),e$=(0,r.useRef)(null),[e0,e4]=(0,r.useState)([]),[e1,e2]=(0,r.useState)(!1),[e5,e3]=(0,r.useState)(0),e7=(0,r.useCallback)(()=>{!eB&&eY.current&&eY.current.scrollIntoView({behavior:"smooth"})},[eB]);(0,r.useEffect)(()=>{e7()},[eU,e7]),(0,r.useEffect)(()=>{let e=localStorage.getItem("token");if(!e)return;let t=()=>{let a=new WebSocket("".concat((0,em.BQ)(),"/api/ws/logs?token=").concat(e));e$.current=a,a.onopen=()=>{eH(!0),e8("WebSocket 连接已建立")},a.onmessage=e=>{try{if("ping"===e.data){a.send("pong");return}if("pong"===e.data)return;let r=JSON.parse(e.data);if(r.message){var t,s;let e={id:(null===(t=r.id)||void 0===t?void 0:t.toString())||Date.now().toString()+Math.random(),timestamp:r.timestamp||new Date().toISOString(),level:(null===(s=r.level)||void 0===s?void 0:s.toUpperCase())||"INFO",message:r.message||""};eV(t=>[...t.slice(-500),e])}}catch(t){"ping"!==e.data&&"pong"!==e.data&&console.error("解析日志失败",t)}},a.onclose=()=>{eH(!1),e8("WebSocket 连接已断开，5秒后重连..."),setTimeout(t,5e3)},a.onerror=()=>{eH(!1)}};return t(),()=>{e$.current&&e$.current.close()}},[]);let e8=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INFO";eV(a=>[...a.slice(-500),{id:Date.now().toString(),timestamp:new Date().toISOString(),level:t,message:"[System] ".concat(e)}])};(0,r.useEffect)(()=>{if(!ep)return;let e=async()=>{try{let e=await em.Z9.getStatus(ep);eq(e),eJ("running"===e.status||"stopping"===e.status)}catch(e){console.error("获取状态失败",e)}};e();let t=setInterval(e,3e3);return()=>clearInterval(t)},[ep]);let e6=async()=>{if(ep){e2(!0);try{let e=(await em.Bl.getFiles(ep,eC,"json")).files||[];if(e.length>0){let t=e.find(e=>e.name.includes("contents"))||e[0],a=await em.Bl.getFileContent(ep,t.path,10);e4(a.data||[]),e3(a.total||0)}else e4([]),e3(0)}catch(e){console.error("加载数据失败",e),e4([]),e3(0)}finally{e2(!1)}}};(0,r.useEffect)(()=>{ep&&e6()},[eC,ep]),(0,r.useEffect)(()=>{if(!eM||!ep)return;let e=setInterval(e6,5e3);return()=>clearInterval(e)},[eM,ep,eC]);let e9=async()=>{if(ep){if(!eO.trim()&&"search"===ek){e8("请输入搜索关键词","WARNING");return}try{e8("开始启动 ".concat(eC," 爬虫...")),await em.Z9.start(ep,{platform:eC,crawler_type:ek,login_type:eD,save_option:eZ,keywords:eO.trim(),start_page:1,max_pages:eE?parseInt(eE):void 0,enable_comments:!0,headless:e_}),eJ(!0),e8("爬虫启动成功！","INFO")}catch(e){e8("启动失败: ".concat(e.message),"ERROR")}}},te=async()=>{if(ep)try{await em.Z9.stop(ep),eJ(!1),e8("爬虫已停止","WARNING")}catch(e){e8("停止失败: ".concat(e.message),"ERROR")}},tt=e=>{navigator.clipboard.writeText(e)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[(0,s.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),(0,s.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"})]}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-black/30 border-b border-white/10",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-400 to-purple-500 flex items-center justify-center",children:(0,s.jsx)(E.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-slate-900 animate-pulse"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"LittleCrawler"}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"v1.0"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 border border-white/10",children:eK?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.Z,{className:"w-4 h-4 text-green-400"}),(0,s.jsx)("span",{className:"text-xs text-green-400",children:ej("common.connected")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O.Z,{className:"w-4 h-4 text-red-400"}),(0,s.jsx)("span",{className:"text-xs text-red-400",children:ej("common.disconnected")})]})}),eM&&(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-cyan-500/20 border border-cyan-500/30",children:[(0,s.jsx)(T.Z,{className:"w-4 h-4 text-cyan-400 animate-pulse"}),(0,s.jsx)("span",{className:"text-xs text-cyan-400",children:ej("common.running")})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(n.e,{content:"zh"===eb?"English":"中文",children:(0,s.jsx)(o.A,{isIconOnly:!0,variant:"flat",className:"bg-white/5 hover:bg-white/10",onClick:()=>ef("zh"===eb?"en":"zh"),children:(0,s.jsx)("span",{className:"text-xs font-medium text-gray-300",children:"zh"===eb?"EN":"中"})})}),(0,s.jsx)(n.e,{content:ej("common.theme"),children:(0,s.jsx)(o.A,{isIconOnly:!0,variant:"flat",className:"bg-white/5 hover:bg-white/10",onClick:()=>ey("dark"===ev?"light":"dark"),children:"dark"===ev?(0,s.jsx)(A.Z,{className:"w-4 h-4 text-yellow-400"}):(0,s.jsx)(z.Z,{className:"w-4 h-4 text-gray-400"})})}),(0,s.jsxs)(i.F,{children:[(0,s.jsx)(c.S,{children:(0,s.jsxs)(o.A,{variant:"flat",className:"bg-white/5 hover:bg-white/10 gap-2",children:[(0,s.jsx)(d.h,{size:"sm",name:null==a?void 0:null===(t=a.username)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.toUpperCase(),className:"bg-gradient-to-br from-cyan-400 to-purple-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-300",children:null==a?void 0:a.username}),(0,s.jsx)(_.Z,{className:"w-4 h-4 text-gray-400"})]})}),(0,s.jsxs)(h.a,{children:[(0,s.jsx)(x.W,{startContent:(0,s.jsx)(F.Z,{className:"w-4 h-4"}),children:ej("profile")},"profile"),(0,s.jsx)(x.W,{startContent:(0,s.jsx)(M.Z,{className:"w-4 h-4"}),children:ej("settings")},"settings"),(0,s.jsx)(x.W,{className:"text-danger",color:"danger",startContent:(0,s.jsx)(J.Z,{className:"w-4 h-4"}),onClick:()=>{ew(),eN.push("/login")},children:ej("logout")},"logout")]})]})]})]})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)(m.w,{className:"lg:col-span-2 bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,s.jsxs)(g.u,{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center",children:(0,s.jsx)(M.Z,{className:"w-4 h-4 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-white",children:ej("dashboard.crawlerConfig")}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:ej("dashboard.configDescription")})]})]}),(0,s.jsx)("div",{className:"flex gap-2",children:eM?(0,s.jsx)(o.A,{color:"danger",variant:"flat",startContent:(0,s.jsx)(W.Z,{className:"w-4 h-4"}),onClick:te,className:"bg-red-500/20 hover:bg-red-500/30",children:ej("common.stop")}):(0,s.jsx)(o.A,{color:"success",variant:"flat",startContent:(0,s.jsx)(q.Z,{className:"w-4 h-4"}),onClick:e9,className:"bg-green-500/20 hover:bg-green-500/30",children:ej("common.start")})})]}),(0,s.jsx)(u.j,{className:"bg-white/10"}),(0,s.jsxs)(p.G,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)(w.g,{label:ej("crawler.platform"),selectedKeys:[eC],onChange:e=>eS(e.target.value),classNames:{trigger:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400"},children:[(0,s.jsx)(j.R,{value:"xhs",startContent:(0,s.jsx)(U.Z,{className:"w-4 h-4 text-red-400"}),children:ej("crawler.platforms.xhs")},"xhs"),(0,s.jsx)(j.R,{value:"zhihu",startContent:(0,s.jsx)(V.Z,{className:"w-4 h-4 text-blue-400"}),children:ej("crawler.platforms.zhihu")},"zhihu")]}),(0,s.jsxs)(w.g,{label:ej("crawler.crawlerType"),selectedKeys:[ek],onChange:e=>eP(e.target.value),classNames:{trigger:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400"},children:[(0,s.jsx)(j.R,{value:"search",startContent:(0,s.jsx)(B.Z,{className:"w-4 h-4 text-cyan-400"}),children:ej("crawler.types.search")},"search"),(0,s.jsx)(j.R,{value:"detail",startContent:(0,s.jsx)(Q.Z,{className:"w-4 h-4 text-purple-400"}),children:ej("crawler.types.detail")},"detail"),(0,s.jsx)(j.R,{value:"creator",startContent:(0,s.jsx)(F.Z,{className:"w-4 h-4 text-green-400"}),children:ej("crawler.types.creator")},"creator")]}),(0,s.jsxs)(w.g,{label:ej("crawler.loginType"),selectedKeys:[eD],onChange:e=>eL(e.target.value),classNames:{trigger:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400"},children:[(0,s.jsx)(j.R,{value:"qrcode",startContent:(0,s.jsx)(G.Z,{className:"w-4 h-4 text-orange-400"}),children:ej("crawler.loginTypes.qrcode")},"qrcode"),(0,s.jsx)(j.R,{value:"phone",startContent:(0,s.jsx)(X.Z,{className:"w-4 h-4 text-blue-400"}),children:ej("crawler.loginTypes.phone")},"phone"),(0,s.jsx)(j.R,{value:"cookie",startContent:(0,s.jsx)(K.Z,{className:"w-4 h-4 text-yellow-400"}),children:ej("crawler.loginTypes.cookie")},"cookie")]}),(0,s.jsxs)(w.g,{label:ej("data.saveFormat"),selectedKeys:[eZ],onChange:e=>eI(e.target.value),classNames:{trigger:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400"},children:[(0,s.jsx)(j.R,{value:"json",startContent:(0,s.jsx)(H.Z,{className:"w-4 h-4 text-yellow-400"}),children:ej("data.formats.json")},"json"),(0,s.jsx)(j.R,{value:"csv",startContent:(0,s.jsx)(Y.Z,{className:"w-4 h-4 text-green-400"}),children:ej("data.formats.csv")},"csv"),(0,s.jsx)(j.R,{value:"sqlite",startContent:(0,s.jsx)($.Z,{className:"w-4 h-4 text-blue-400"}),children:ej("data.formats.sqlite")},"sqlite"),(0,s.jsx)(j.R,{value:"mongodb",startContent:(0,s.jsx)(ee.Z,{className:"w-4 h-4 text-green-500"}),children:ej("data.formats.mongodb")},"mongodb")]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(b.Y,{label:ej("crawler.keywords"),placeholder:ej("crawler.keywordsPlaceholder"),value:eO,onChange:e=>eT(e.target.value),startContent:(0,s.jsx)(B.Z,{className:"w-4 h-4 text-gray-400"}),classNames:{inputWrapper:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400"},className:"md:col-span-2"}),(0,s.jsx)(b.Y,{label:ej("crawler.maxPages"),placeholder:ej("crawler.maxPagesPlaceholder"),description:ej("crawler.maxPagesDescription"),type:"number",min:"1",value:eE,onChange:e=>eR(e.target.value),startContent:(0,s.jsx)(et.Z,{className:"w-4 h-4 text-gray-400"}),classNames:{inputWrapper:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400",description:"text-gray-500 text-xs"}})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-6",children:[(0,s.jsx)(f.i,{isSelected:eA,onValueChange:ez,classNames:{wrapper:"group-data-[selected=true]:bg-cyan-500"},children:(0,s.jsx)("span",{className:"text-sm text-gray-300",children:ej("crawler.enableProxy")})}),(0,s.jsx)(f.i,{isSelected:e_,onValueChange:eF,classNames:{wrapper:"group-data-[selected=true]:bg-purple-500"},children:(0,s.jsx)("span",{className:"text-sm text-gray-300",children:ej("crawler.cdpMode")})})]})]})]}),(0,s.jsxs)(m.w,{className:"bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,s.jsxs)(g.u,{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center",children:(0,s.jsx)(ea.Z,{className:"w-4 h-4 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-white",children:ej("dashboard.dataStats")}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:ej("dashboard.collectedData")})]})]}),(0,s.jsx)(o.A,{isIconOnly:!0,variant:"flat",size:"sm",onClick:e6,className:"bg-white/5 hover:bg-white/10",children:(0,s.jsx)(es.Z,{className:"w-4 h-4 text-gray-400 ".concat(e1?"animate-spin":"")})})]}),(0,s.jsx)(u.j,{className:"bg-white/10"}),(0,s.jsxs)(p.G,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)("div",{className:"text-5xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:e5.toLocaleString()}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:ej("data.records")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-semibold text-cyan-400",children:(null==eW?void 0:eW.notes_count)||0}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:ej("data.notes")})]}),(0,s.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-semibold text-purple-400",children:(null==eW?void 0:eW.comments_count)||0}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:ej("data.comments")})]})]}),eM&&(0,s.jsx)(v.W,{size:"sm",isIndeterminate:!0,color:"secondary",className:"max-w-full",classNames:{indicator:"bg-gradient-to-r from-cyan-400 to-purple-500"}})]})]})]}),(0,s.jsxs)(m.w,{className:"bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,s.jsxs)(g.u,{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center",children:(0,s.jsx)(ea.Z,{className:"w-4 h-4 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-white",children:ej("dashboard.latestData")}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:ej("dashboard.latestRecords")})]})]}),(0,s.jsxs)(i.F,{children:[(0,s.jsx)(c.S,{children:(0,s.jsx)(o.A,{variant:"flat",size:"sm",startContent:(0,s.jsx)(er.Z,{className:"w-4 h-4"}),className:"bg-white/5 hover:bg-white/10",children:ej("common.export")})}),(0,s.jsxs)(h.a,{children:[(0,s.jsx)(x.W,{children:ej("data.exportJson")},"json"),(0,s.jsx)(x.W,{children:ej("data.exportCsv")},"csv"),(0,s.jsx)(x.W,{children:ej("data.exportExcel")},"excel")]})]})]}),(0,s.jsx)(u.j,{className:"bg-white/10"}),(0,s.jsx)(p.G,{className:"overflow-x-auto",children:e1?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(y.c,{color:"secondary"})}):0===e0.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-400",children:ej("data.noData")}):(0,s.jsxs)(N.b,{"aria-label":ej("dashboard.latestData"),classNames:{wrapper:"bg-transparent shadow-none",th:"bg-white/5 text-gray-300",td:"text-gray-300"},children:[(0,s.jsxs)(C.J,{children:[(0,s.jsx)(S.j,{children:ej("data.title")}),(0,s.jsx)(S.j,{children:ej("data.author")}),(0,s.jsx)(S.j,{children:ej("data.type")}),(0,s.jsx)(S.j,{children:ej("data.likes")}),(0,s.jsx)(S.j,{children:ej("common.actions")})]}),(0,s.jsx)(k.y,{children:e0.map((e,t)=>(0,s.jsxs)(P.g,{children:[(0,s.jsx)(D.X,{children:(0,s.jsx)("div",{className:"max-w-xs truncate",children:e.title||e.desc||"-"})}),(0,s.jsx)(D.X,{children:e.nickname||e.user_nickname||"-"}),(0,s.jsx)(D.X,{children:(0,s.jsx)(L.z,{size:"sm",variant:"flat",className:"bg-white/10",children:"video"===e.type?"视频":"normal"===e.type?"图文":e.type||"note"})}),(0,s.jsx)(D.X,{children:e.liked_count||0}),(0,s.jsx)(D.X,{children:(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(n.e,{content:"查看详情",children:(0,s.jsx)(o.A,{isIconOnly:!0,size:"sm",variant:"flat",className:"bg-white/5 hover:bg-white/10",children:(0,s.jsx)(Q.Z,{className:"w-3 h-3"})})}),e.note_url&&(0,s.jsx)(n.e,{content:ej("common.openLink"),children:(0,s.jsx)(o.A,{isIconOnly:!0,size:"sm",variant:"flat",className:"bg-white/5 hover:bg-white/10",onClick:()=>window.open(e.note_url,"_blank"),children:(0,s.jsx)(el.Z,{className:"w-3 h-3"})})})]})})]},e.note_id||e.id||t))})]})})]}),(0,s.jsxs)(m.w,{className:"bg-white/5 backdrop-blur-xl border border-white/10 transition-all duration-300 ".concat(eG?"fixed inset-4 z-50":""),children:[(0,s.jsxs)(g.u,{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center",children:(0,s.jsx)(en.Z,{className:"w-4 h-4 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-white",children:ej("dashboard.realtimeLogs")}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:[eU.length," ",ej("logs.entries")]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.A,{isIconOnly:!0,size:"sm",variant:"flat",onClick:()=>eQ(!eB),className:"bg-white/5 hover:bg-white/10",children:eB?(0,s.jsx)(q.Z,{className:"w-4 h-4 text-green-400"}):(0,s.jsx)(eo.Z,{className:"w-4 h-4 text-yellow-400"})}),(0,s.jsx)(o.A,{isIconOnly:!0,size:"sm",variant:"flat",onClick:()=>{eV([]),e8("日志已清空")},className:"bg-white/5 hover:bg-white/10",children:(0,s.jsx)(ei.Z,{className:"w-4 h-4 text-gray-400"})}),(0,s.jsx)(o.A,{isIconOnly:!0,size:"sm",variant:"flat",onClick:()=>eX(!eG),className:"bg-white/5 hover:bg-white/10",children:eG?(0,s.jsx)(ec.Z,{className:"w-4 h-4 text-gray-400"}):(0,s.jsx)(ed.Z,{className:"w-4 h-4 text-gray-400"})})]})]}),(0,s.jsx)(u.j,{className:"bg-white/10"}),(0,s.jsx)(p.G,{className:"p-0 ".concat(eG?"h-[calc(100vh-12rem)]":"h-64"),children:(0,s.jsxs)("div",{className:"h-full overflow-y-auto font-mono text-xs p-4 bg-black/30",children:[0===eU.length?(0,s.jsx)("div",{className:"text-gray-500 text-center py-8",children:ej("logs.waiting")}):eU.map(e=>(0,s.jsxs)("div",{className:"flex gap-2 py-0.5 hover:bg-white/5 px-2 -mx-2 rounded group",children:[(0,s.jsx)("span",{className:"text-gray-500 select-none",children:eg(e.timestamp)}),(0,s.jsxs)("span",{className:"font-semibold w-16 ".concat(eu[e.level]),children:["[",e.level,"]"]}),(0,s.jsx)("span",{className:"text-gray-300 flex-1",children:e.message}),(0,s.jsx)(o.A,{isIconOnly:!0,size:"sm",variant:"light",className:"opacity-0 group-hover:opacity-100 transition-opacity h-4 w-4 min-w-4",onClick:()=>tt(e.message),children:(0,s.jsx)(eh.Z,{className:"w-3 h-3 text-gray-400"})})]},e.id)),(0,s.jsx)("div",{ref:eY})]})})]})]}),(0,s.jsx)("footer",{className:"max-w-7xl mx-auto px-4 py-6 text-center text-gray-500 text-sm",children:(0,s.jsx)("p",{children:ej("common.copyright")})})]})]})}},4362:function(e,t,a){"use strict";a.d(t,{H:function(){return o},a:function(){return i}});var s=a(7437),r=a(2265),l=a(1837);let n=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,r.useState)(null),[i,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("token");e?(c(e),l.iJ.getCurrentUser(e).then(e=>{o(e)}).catch(()=>{localStorage.removeItem("token"),c(null)}).finally(()=>{h(!1)})):h(!1)},[]);let x=async e=>{let t=await l.iJ.login(e);c(t.access_token),o(t.user),localStorage.setItem("token",t.access_token)};return(0,s.jsx)(n.Provider,{value:{user:a,token:i,isAuthenticated:!!i&&!!a,isLoading:d,login:x,logout:()=>{i&&l.iJ.logout(i).catch(console.error),c(null),o(null),localStorage.removeItem("token")}},children:t})}function i(){let e=(0,r.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},713:function(e,t,a){"use strict";a.d(t,{b:function(){return i},Q:function(){return c}});var s=a(7437),r=a(2265),l=JSON.parse('{"common":{"appName":"LittleCrawler","version":"v1.0.0","login":"登录","logout":"退出登录","username":"用户名","password":"密码","submit":"提交","cancel":"取消","save":"保存","delete":"删除","edit":"编辑","search":"搜索","loading":"加载中...","success":"成功","error":"错误","confirm":"确认","clear":"清空","download":"下载","export":"导出","refresh":"刷新","start":"启动","stop":"停止","status":"状态","actions":"操作","settings":"设置","theme":"主题","language":"语言","dark":"深色","light":"浅色","chinese":"中文","english":"English","running":"运行中","connected":"实时连接","disconnected":"连接断开","dataOverview":"数据概览","totalData":"总数据","todayData":"今日新增","viewAll":"查看全部","openLink":"打开链接","copyright":"LittleCrawler \xa9 2025 - 多平台社交媒体爬虫框架"},"nav":{"dashboard":"仪表盘","crawler":"爬虫管理","data":"数据管理","logs":"运行日志","settings":"系统设置"},"login":{"title":"欢迎使用 LittleCrawler","subtitle":"多平台社交媒体数据采集工具","placeholder":{"username":"请输入用户名","password":"请输入密码"},"error":{"required":"请输入用户名和密码","invalid":"用户名或密码错误"}},"dashboard":{"title":"系统概览","crawlerConfig":"爬虫配置","configDescription":"配置并启动爬虫任务","configDesc":"配置并启动爬虫任务","apiStatus":"API状态","healthy":"正常","unhealthy":"异常","platforms":"支持平台","currentUser":"当前用户","systemVersion":"系统版本","realtimeLogs":"实时日志","logsDesc":"查看爬虫运行状态","dataPreview":"数据预览","enableProxy":"代理","enableCdp":"CDP模式","advanced":"高级选项","dataStats":"数据统计","collectedData":"已采集的数据","latestData":"最新数据","latestRecords":"最近采集的10条记录"},"crawler":{"title":"爬虫配置","platform":"平台","crawlerType":"类型","loginType":"登录","keywords":"搜索关键词","keywordsPlaceholder":"多个用逗号分隔","startPage":"起始页码","maxPages":"最大页数","maxPagesPlaceholder":"留空为无限制","maxPagesDescription":"不填则爬取所有页面","maxPage":"最大页数","startCrawl":"开始爬取","stopCrawl":"停止爬取","enableProxy":"启用代理","cdpMode":"CDP 模式","types":{"search":"搜索","detail":"详情","creator":"创作者"},"loginTypes":{"qrcode":"扫码","phone":"手机","cookie":"Cookie"},"platforms":{"xhs":"小红书","zhihu":"知乎"},"status":{"idle":"空闲","running":"运行中","completed":"已完成","error":"出错"}},"data":{"title":"标题","saveFormat":"存储","fetchImages":"抓取图片","fetchComments":"抓取评论","fetchSubComments":"抓取子评论","headlessMode":"无头模式","dataList":"数据列表","noData":"暂无数据，启动爬虫开始采集","totalRecords":"共 {count} 条记录","records":"条记录","notes":"笔记","comments":"评论","author":"作者","type":"类型","likes":"点赞","exportJson":"导出 JSON","exportCsv":"导出 CSV","exportExcel":"导出 Excel","formats":{"csv":"CSV","json":"JSON","db":"MySQL","sqlite":"SQLite","mongodb":"MongoDB","excel":"Excel"},"columns":{"id":"ID","title":"标题","author":"作者","likes":"点赞","comments":"评论","createTime":"创建时间"}},"logs":{"title":"运行日志","displayCount":"显示条数","clearLogs":"清空日志","autoScroll":"自动滚动","connected":"已连接","disconnected":"已断开","reconnect":"重新连接","noLogs":"暂无日志","systemLog":"系统日志","entries":"条日志","waiting":"等待日志输出..."}}');let n={zh:l,en:JSON.parse('{"common":{"appName":"LittleCrawler","version":"v1.0.0","login":"Login","logout":"Logout","username":"Username","password":"Password","submit":"Submit","cancel":"Cancel","save":"Save","delete":"Delete","edit":"Edit","search":"Search","loading":"Loading...","success":"Success","error":"Error","confirm":"Confirm","clear":"Clear","download":"Download","export":"Export","refresh":"Refresh","start":"Start","stop":"Stop","status":"Status","actions":"Actions","settings":"Settings","theme":"Theme","language":"Language","dark":"Dark","light":"Light","chinese":"中文","english":"English","running":"Running","connected":"Connected","disconnected":"Disconnected","dataOverview":"Data Overview","totalData":"Total","todayData":"Today","viewAll":"View All","openLink":"Open Link","copyright":"LittleCrawler \xa9 2025 - Multi-platform Social Media Crawler"},"nav":{"dashboard":"Dashboard","crawler":"Crawler","data":"Data","logs":"Logs","settings":"Settings"},"login":{"title":"Welcome to LittleCrawler","subtitle":"Multi-platform Social Media Crawler","placeholder":{"username":"Enter username","password":"Enter password"},"error":{"required":"Please enter username and password","invalid":"Invalid username or password"}},"dashboard":{"title":"Overview","crawlerConfig":"Crawler Config","configDescription":"Configure and start crawler tasks","configDesc":"Configure and start crawler","apiStatus":"API Status","healthy":"Healthy","unhealthy":"Unhealthy","platforms":"Supported Platforms","currentUser":"Current User","systemVersion":"System Version","realtimeLogs":"Realtime Logs","logsDesc":"View crawler status","dataPreview":"Data Preview","enableProxy":"Proxy","enableCdp":"CDP Mode","advanced":"Advanced","dataStats":"Data Statistics","collectedData":"Collected data","latestData":"Latest Data","latestRecords":"Latest 10 records"},"crawler":{"title":"Crawler Settings","platform":"Platform","crawlerType":"Type","loginType":"Login","keywords":"Keywords","keywordsPlaceholder":"Separated by comma","startPage":"Start Page","maxPages":"Max Pages","maxPagesPlaceholder":"Empty for unlimited","maxPagesDescription":"Leave empty to crawl all pages","maxPage":"Max Pages","startCrawl":"Start Crawl","stopCrawl":"Stop Crawl","enableProxy":"Enable Proxy","cdpMode":"CDP Mode","types":{"search":"Search","detail":"Detail","creator":"Creator"},"loginTypes":{"qrcode":"QR Code","phone":"Phone","cookie":"Cookie"},"platforms":{"xhs":"Xiaohongshu","zhihu":"Zhihu"},"status":{"idle":"Idle","running":"Running","completed":"Completed","error":"Error"}},"data":{"title":"Title","saveFormat":"Storage","fetchImages":"Fetch Images","fetchComments":"Fetch Comments","fetchSubComments":"Fetch Sub-Comments","headlessMode":"Headless Mode","dataList":"Data List","noData":"No data yet, start crawler to collect","totalRecords":"{count} records","records":"records","notes":"Notes","comments":"Comments","author":"Author","type":"Type","likes":"Likes","exportJson":"Export JSON","exportCsv":"Export CSV","exportExcel":"Export Excel","formats":{"csv":"CSV","json":"JSON","db":"MySQL","sqlite":"SQLite","mongodb":"MongoDB","excel":"Excel"},"columns":{"id":"ID","title":"Title","author":"Author","likes":"Likes","comments":"Comments","createTime":"Created At"}},"logs":{"title":"Runtime Logs","displayCount":"Display Count","clearLogs":"Clear Logs","autoScroll":"Auto Scroll","connected":"Connected","disconnected":"Disconnected","reconnect":"Reconnect","noLogs":"No logs yet","systemLog":"System Log","entries":"entries","waiting":"Waiting for logs..."}}')},o=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)("zh"),[c,d]=(0,r.useState)(l);return(0,r.useEffect)(()=>{let e=localStorage.getItem("locale");e&&n[e]&&(i(e),d(n[e]))},[]),(0,s.jsx)(o.Provider,{value:{locale:a,messages:c,setLocale:e=>{i(e),d(n[e]),localStorage.setItem("locale",e)},t:(e,t)=>{var a,s;return s=null!==(a=e.split(".").reduce((e,t)=>null==e?void 0:e[t],c))&&void 0!==a?a:e,t?s.replace(/\{(\w+)\}/g,(e,a)=>{var s;return String(null!==(s=t[a])&&void 0!==s?s:"{".concat(a,"}"))}):s}},children:t})}function c(){let e=(0,r.useContext)(o);if(!e)throw Error("useI18n must be used within I18nProvider");return e}},1837:function(e,t,a){"use strict";a.d(t,{BQ:function(){return r},Bl:function(){return i},Z9:function(){return o},iJ:function(){return n}});let s=()=>window.location.origin,r=()=>{{let e="https:"===window.location.protocol?"wss:":"ws:";return"".concat(e,"//").concat(window.location.host)}};async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r={"Content-Type":"application/json",...t.headers};a&&(r.Authorization="Bearer ".concat(a));let l=await fetch("".concat(s()).concat(e),{...t,headers:r});if(!l.ok)throw Error((await l.json().catch(()=>({detail:"Unknown error"}))).detail||"HTTP ".concat(l.status));return l.json()}let n={login:e=>l("/api/auth/login",{method:"POST",body:JSON.stringify(e)}),getCurrentUser:e=>l("/api/auth/me",{},e),logout:e=>l("/api/auth/logout",{method:"POST"},e)},o={getStatus:e=>l("/api/crawler/status",{},e),start:(e,t)=>l("/api/crawler/start",{method:"POST",body:JSON.stringify(t)},e),stop:e=>l("/api/crawler/stop",{method:"POST"},e),getPlatforms:e=>l("/api/crawler/platforms",{},e)},i={getFiles:(e,t,a)=>{let s=new URLSearchParams;t&&s.append("platform",t),a&&s.append("file_type",a);let r=s.toString();return l("/api/data/files".concat(r?"?".concat(r):""),{},e)},getFileContent:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return l("/api/data/files/".concat(encodeURIComponent(t),"?preview=true&limit=").concat(a),{},e)},export:(e,t,a)=>fetch("".concat(s(),"/api/data/").concat(t,"/export?format=").concat(a),{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.blob()),delete:(e,t,a)=>l("/api/data/".concat(t,"/").concat(a),{method:"DELETE"},e)}}},function(e){e.O(0,[69,724,401,896,971,117,744],function(){return e(e.s=5877)}),_N_E=e.O()}]);